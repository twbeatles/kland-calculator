import{p as v,j as e,h as $,g as w}from"./index-DPr0ZO1K.js";import{r as l}from"./vendor-icons-BFBm8Ebl.js";import{N as y}from"./Inputs-Cdh2lBJ4.js";import"./vendor-react-CRB3T2We.js";import"./storage-DAFidnzi.js";const A=()=>{const[m,E]=l.useState(""),[d,M]=l.useState(""),[u,R]=l.useState(""),[o,C]=l.useState(!0),[c,S]=l.useState(!1),r=l.useMemo(()=>{const s=v(m),i=v(u),g=d?new Date(d):null;if(!s||!i||!g)return null;const f=Math.floor((new Date-g)/(1e3*60*60*24*30)),h=f/12,n=i-s;if(n<=0)return{gain:0,scenarios:[],message:"ì–‘ë„ì°¨ìµì´ ì—†ì–´ ì„¸ê¸ˆì´ ë°œìƒí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤."};const j=o&&h>=2&&n<=12e8,k=(t,a)=>t<3?0:a?Math.min(t*4,40):t>=3&&t<4?24:Math.min(24+(t-3)*4,80),D=t=>t<=14e6?{rate:6,deduction:0}:t<=5e7?{rate:15,deduction:126e4}:t<=88e6?{rate:24,deduction:576e4}:t<=15e7?{rate:35,deduction:1544e4}:t<=3e8?{rate:38,deduction:1994e4}:t<=5e8?{rate:40,deduction:2594e4}:t<=1e9?{rate:42,deduction:3594e4}:{rate:45,deduction:6594e4},P=t=>{if(j&&t>=2)return{tax:0,deductionRate:0,isExempt:!0};const a=k(t,c),p=n*(a/100),b=n-p-25e5,N=D(Math.max(0,b));return{tax:Math.max(0,Math.floor(b*(N.rate/100)-N.deduction)),deductionRate:a,taxableGain:b,isExempt:!1}},T=Math.floor(h),x=[];for(let t=0;t<=5;t++){const a=T+t,p=P(a);x.push({years:a,label:t===0?"í˜„ì¬":`+${t}ë…„ í›„`,...p})}const Y=x.reduce((t,a)=>a.tax<t.tax?a:t,x[0]);return{gain:n,holdingYears:h.toFixed(1),holdingMonths:f,isTaxExempt:j,scenarios:x,optimal:Y}},[m,d,u,o,c]);return e.jsxs("div",{className:"space-y-6 pb-32 animate-slide-up px-1",children:[e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-100",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 mb-6 flex items-center",children:[e.jsx($,{className:"w-5 h-5 mr-3 text-amber-600"})," ì ˆì„¸ ì‹œë®¬ë ˆì´í„°"]}),e.jsxs("div",{className:"space-y-5",children:[e.jsx(y,{label:"ì·¨ë“ê°€",value:m,onChange:E,color:"blue"}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest block mb-2 ml-1",children:"ì·¨ë“ì¼"}),e.jsx("input",{type:"date",value:d,onChange:s=>M(s.target.value),className:"w-full px-4 py-3 bg-slate-50 rounded-2xl font-bold text-slate-700 outline-none focus:ring-2 focus:ring-amber-500"})]}),e.jsx(y,{label:"ì˜ˆìƒ ë§¤ë„ê°€",value:u,onChange:R,color:"green"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>C(!o),className:`flex-1 py-3 rounded-xl font-bold text-sm transition-all ${o?"bg-amber-500 text-white":"bg-slate-100 text-slate-500"}`,children:"1ê°€êµ¬ 1ì£¼íƒ"}),e.jsx("button",{onClick:()=>S(!c),className:`flex-1 py-3 rounded-xl font-bold text-sm transition-all ${c?"bg-red-500 text-white":"bg-slate-100 text-slate-500"}`,children:"ì¡°ì •ëŒ€ìƒì§€ì—­"})]})]})]}),r?r.message?e.jsx("div",{className:"bg-green-50 p-6 rounded-[2rem] border border-green-200 text-center",children:e.jsxs("p",{className:"text-lg font-bold text-green-700",children:["âœ“ ",r.message]})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-yellow-50 p-5 rounded-2xl border border-amber-100",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-amber-600",children:"í˜„ì¬ ë³´ìœ ê¸°ê°„"}),e.jsxs("p",{className:"text-2xl font-black text-amber-800",children:[r.holdingYears,"ë…„"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs font-bold text-slate-500",children:"ì˜ˆìƒ ì–‘ë„ì°¨ìµ"}),e.jsx("p",{className:"text-xl font-black text-slate-800",children:w(r.gain)})]})]}),r.isTaxExempt&&e.jsx("div",{className:"p-3 bg-green-100 rounded-xl text-center",children:e.jsx("p",{className:"text-sm font-bold text-green-700",children:"ğŸ‰ 1ê°€êµ¬ 1ì£¼íƒ ë¹„ê³¼ì„¸ ì ìš© ê°€ëŠ¥!"})})]}),e.jsxs("div",{className:"bg-white p-5 rounded-2xl shadow-sm border border-slate-100",children:[e.jsx("h4",{className:"text-sm font-bold text-slate-600 mb-4",children:"ğŸ“Š ë§¤ë„ ì‹œì ë³„ ì„¸ê¸ˆ ë¹„êµ"}),e.jsx("div",{className:"space-y-2",children:r.scenarios.map((s,i)=>e.jsxs("div",{className:`p-3 rounded-xl flex justify-between items-center ${s===r.optimal?"bg-emerald-50 border border-emerald-200":"bg-slate-50"}`,children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-bold text-slate-700",children:s.label}),e.jsxs("span",{className:"text-xs text-slate-400 ml-2",children:["(",s.years,"ë…„ ë³´ìœ )"]}),s===r.optimal&&e.jsx("span",{className:"text-xs text-emerald-600 ml-2 font-bold",children:"â­ ìµœì "})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:`font-bold ${s.isExempt?"text-green-600":"text-slate-800"}`,children:s.isExempt?"ë¹„ê³¼ì„¸":w(s.tax)}),!s.isExempt&&s.deductionRate>0&&e.jsxs("p",{className:"text-xs text-slate-400",children:["ê³µì œ ",s.deductionRate,"%"]})]})]},i))})]}),e.jsxs("div",{className:"p-4 bg-indigo-50 rounded-2xl",children:[e.jsx("p",{className:"text-sm font-bold text-indigo-700 mb-2",children:"ğŸ’¡ ì ˆì„¸ íŒ"}),e.jsxs("ul",{className:"text-xs text-indigo-600 space-y-1",children:[e.jsx("li",{children:"â€¢ 2ë…„ ì´ìƒ ë³´ìœ  ì‹œ ì¥ê¸°ë³´ìœ íŠ¹ë³„ê³µì œ ì ìš©"}),e.jsx("li",{children:"â€¢ 1ê°€êµ¬ 1ì£¼íƒì€ 2ë…„ ë³´ìœ +ê±°ì£¼ ì‹œ ë¹„ê³¼ì„¸"}),e.jsx("li",{children:"â€¢ ë¹„ê·œì œì§€ì—­: ìµœëŒ€ 80% ê³µì œ (10ë…„ ì´ìƒ)"})]})]})]}):e.jsx("div",{className:"text-center py-20 text-slate-300 bg-white rounded-[2rem] border-2 border-dashed border-slate-200",children:"ì·¨ë“ê°€, ì·¨ë“ì¼, ì˜ˆìƒ ë§¤ë„ê°€ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”"})]})};export{A as TaxOptimizer,A as default};
