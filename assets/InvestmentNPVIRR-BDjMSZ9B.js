import{r as i,p as j,s as T,j as e,v as A,i as y}from"./index-B6u5FO8e.js";import{N as v}from"./Inputs-Blh7JT5J.js";const q=()=>{const[p,V]=i.useState(""),[h,F]=i.useState(""),[b,M]=i.useState("5"),[f,k]=i.useState(""),[d,C]=i.useState("5"),s=i.useMemo(()=>{const a=j(p),o=j(h),r=parseInt(b)||5,n=j(f),w=parseFloat(d)/100||.05;if(!a||!o)return null;let x=-a;for(let t=1;t<=r;t++)x+=o/Math.pow(1+w,t);n>0&&(x+=n/Math.pow(1+w,r));const g=(()=>{let t=.1;const S=100,$=1e-4;let P=!1;for(let I=0;I<S;I++){let u=-a,c=0;for(let l=1;l<=r;l++){const N=Math.pow(1+t,l);if(!isFinite(N)||N===0)break;u+=o/N,c-=l*o/Math.pow(1+t,l+1)}if(n>0){const l=Math.pow(1+t,r);isFinite(l)&&l!==0&&(u+=n/l,c-=r*n/Math.pow(1+t,r+1))}if(Math.abs(u)<$){P=!0;break}if(c===0||!isFinite(c))break;const m=t-u/c;if(!isFinite(m))break;m<-.99?t=-.99:m>10?t=10:t=m}return!P&&Math.abs(t)>5||!isFinite(t)?null:t*100})(),R=o*r+n-a,E=a>0?R/a*100:0;return{npv:Math.round(x),irr:g!==null?g.toFixed(2):"N/A",irrValid:g!==null,totalReturn:Math.round(R),roi:E.toFixed(1),isPositiveNPV:x>0,years:r}},[p,h,b,f,d]);return i.useEffect(()=>{if(s){const a=setTimeout(()=>{T("NPV-IRRë¶„ì„",{timestamp:Date.now()})},3e3);return()=>clearTimeout(a)}},[s]),e.jsxs("div",{className:"space-y-6 pb-32 animate-slide-up px-1",children:[e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-100",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 mb-6 flex items-center",children:[e.jsx(A,{className:"w-5 h-5 mr-3 text-indigo-600"})," NPV/IRR íˆ¬ìë¶„ì„"]}),e.jsxs("div",{className:"space-y-5",children:[e.jsx(v,{label:"ì´ˆê¸° íˆ¬ìê¸ˆ",value:p,onChange:V,color:"blue"}),e.jsx(v,{label:"ì—°ê°„ í˜„ê¸ˆíë¦„ (ì„ëŒ€ìˆ˜ìµ)",value:h,onChange:F,color:"green"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest block mb-2 ml-1",children:"ë³´ìœ ê¸°ê°„ (ë…„)"}),e.jsx("input",{type:"number",value:b,onChange:a=>M(a.target.value),className:"w-full px-4 py-3 text-right bg-slate-50 rounded-2xl font-bold text-slate-700 outline-none focus:ring-2 focus:ring-indigo-500"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest block mb-2 ml-1",children:"í• ì¸ìœ¨ (%)"}),e.jsx("input",{type:"number",value:d,onChange:a=>C(a.target.value),className:"w-full px-4 py-3 text-right bg-slate-50 rounded-2xl font-bold text-slate-700 outline-none focus:ring-2 focus:ring-indigo-500"})]})]}),e.jsx(v,{label:"ë§¤ë„ ì˜ˆìƒê°€ (Exit Value)",value:f,onChange:k,color:"purple"})]})]}),s?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:`p-6 rounded-[2rem] shadow-lg ${s.isPositiveNPV?"bg-gradient-to-br from-indigo-50 to-purple-50 border border-indigo-100":"bg-gradient-to-br from-red-50 to-orange-50 border border-red-100"}`,children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-white rounded-2xl",children:[e.jsx("p",{className:"text-xs font-bold text-slate-500 mb-1",children:"NPV (ìˆœí˜„ì¬ê°€ì¹˜)"}),e.jsx("p",{className:`text-2xl font-black ${s.isPositiveNPV?"text-indigo-700":"text-red-600"}`,children:y(s.npv)}),e.jsx("p",{className:`text-xs mt-1 ${s.isPositiveNPV?"text-emerald-600":"text-red-500"}`,children:s.isPositiveNPV?"âœ“ íˆ¬ì ê¶Œì¥":"âœ— íˆ¬ì ë¹„ê¶Œì¥"})]}),e.jsxs("div",{className:"text-center p-4 bg-white rounded-2xl",children:[e.jsx("p",{className:"text-xs font-bold text-slate-500 mb-1",children:"IRR (ë‚´ë¶€ìˆ˜ìµë¥ )"}),e.jsxs("p",{className:"text-2xl font-black text-purple-700",children:[s.irr,"%"]}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"ì—°í™˜ì‚° ìˆ˜ìµë¥ "})]})]})}),e.jsxs("div",{className:"bg-white p-5 rounded-2xl shadow-sm border border-slate-100 space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-slate-500",children:[s.years,"ë…„ ì´ ìˆ˜ìµ"]}),e.jsxs("span",{className:`font-bold ${s.totalReturn>=0?"text-emerald-600":"text-red-600"}`,children:[s.totalReturn>=0?"+":"",y(s.totalReturn)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-500",children:"ì´ ROI"}),e.jsxs("span",{className:"font-bold text-indigo-600",children:[s.roi,"%"]})]}),e.jsx("div",{className:"h-px bg-slate-200"}),e.jsxs("div",{className:"p-3 bg-slate-50 rounded-xl text-xs text-slate-500",children:["ğŸ’¡ ",e.jsx("strong",{children:"NPV ì–‘ìˆ˜"})," = í• ì¸ìœ¨(",d,"%)ë³´ë‹¤ ë†’ì€ ìˆ˜ìµë¥  ê¸°ëŒ€",e.jsx("br",{}),"ğŸ’¡ ",e.jsx("strong",{children:"IRR"})," = íˆ¬ìê¸ˆì˜ ì‹¤ì œ ì—°í‰ê·  ìˆ˜ìµë¥ "]})]})]}):e.jsx("div",{className:"text-center py-20 text-slate-300 bg-white rounded-[2rem] border-2 border-dashed border-slate-200",children:"ì´ˆê¸° íˆ¬ìê¸ˆê³¼ í˜„ê¸ˆíë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”"})]})};export{q as InvestmentNPVIRR,q as default};
