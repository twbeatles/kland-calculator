import{p as n,g as T,c as l,j as e,T as A,f as V}from"./index-oQ2hgGDo.js";import{r as a}from"./vendor-icons-BFBm8Ebl.js";import{N as o}from"./Inputs-DnhDv_Ml.js";import"./vendor-react-CRB3T2We.js";import"./storage-DAFidnzi.js";const B=()=>{const[c,v]=a.useState(""),[d,N]=a.useState(""),[i,w]=a.useState(""),[m,y]=a.useState(""),[x,R]=a.useState(""),[h,C]=a.useState("5"),u=a.useRef(null),r=a.useRef(null),s=a.useMemo(()=>{const t=n(c),F=n(d),M=n(i),P=n(m)/12,k=n(x),f=parseFloat(h)/100||0;if(!t)return null;const j=t*(1-f),b=F+M+P+k,p=j-b,S=p*12,g=["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],E=g.map((I,$)=>(Math.random()<f?0:t)-b);return{effectiveRent:j,monthlyExpense:b,netCashFlow:p,annualCashFlow:S,months:g,cashFlows:E,isPositive:p>0}},[c,d,i,m,x,h]);return a.useEffect(()=>{if(!(!s||!u.current||!window.Chart))return r.current&&r.current.destroy(),r.current=new window.Chart(u.current,{type:"bar",data:{labels:s.months,datasets:[{label:"순현금흐름",data:s.cashFlows,backgroundColor:s.cashFlows.map(t=>t>=0?"rgba(16, 185, 129, 0.7)":"rgba(239, 68, 68, 0.7)"),borderRadius:6}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:t=>l(t.raw)+"원"}}},scales:{y:{beginAtZero:!0,ticks:{callback:t=>T(t)}}}}}),()=>{r.current&&r.current.destroy()}},[s]),e.jsxs("div",{className:"space-y-6 pb-32 animate-slide-up px-1",children:[e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-100",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 mb-6 flex items-center",children:[e.jsx(A,{className:"w-5 h-5 mr-3 text-emerald-600"})," 현금흐름 분석"]}),e.jsxs("div",{className:"space-y-5",children:[e.jsx(o,{label:"월 임대수입",value:c,onChange:v,color:"green"}),e.jsx(o,{label:"월 대출상환액",value:d,onChange:N,color:"red"}),e.jsx(o,{label:"월 관리비",value:i,onChange:w,color:"orange"}),e.jsx(o,{label:"연 재산세 (월할 계산)",value:m,onChange:y,color:"purple"}),e.jsx(o,{label:"월 수선충당금",value:x,onChange:R,color:"slate"}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest block mb-2 ml-1",children:"예상 공실률 (%)"}),e.jsx("input",{type:"number",value:h,onChange:t=>C(t.target.value),className:"w-full px-4 py-3 text-right bg-slate-50 rounded-2xl font-bold text-slate-700 outline-none focus:ring-2 focus:ring-emerald-500"})]})]})]}),s?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:`p-6 rounded-[2rem] shadow-lg ${s.isPositive?"bg-gradient-to-br from-emerald-50 to-green-50 border border-emerald-100":"bg-gradient-to-br from-red-50 to-orange-50 border border-red-100"}`,children:e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("p",{className:"text-sm font-bold text-slate-500 mb-1",children:"월 순현금흐름"}),e.jsxs("p",{className:`text-4xl font-black ${s.isPositive?"text-emerald-700":"text-red-600"}`,children:[s.isPositive?"+":"",l(Math.round(s.netCashFlow)),"원"]}),e.jsxs("p",{className:"text-sm text-slate-500 mt-2",children:["연간 ",V(Math.round(s.annualCashFlow))]})]})}),e.jsxs("div",{className:"bg-white p-5 rounded-2xl shadow-sm border border-slate-100",children:[e.jsx("h4",{className:"text-sm font-bold text-slate-600 mb-4",children:"12개월 현금흐름 시뮬레이션"}),e.jsx("div",{className:"h-48",children:e.jsx("canvas",{ref:u})})]}),e.jsxs("div",{className:"bg-white p-5 rounded-2xl shadow-sm border border-slate-100",children:[e.jsx("h4",{className:"text-sm font-bold text-slate-600 mb-4",children:"수입/지출 내역"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-500",children:"예상 월 임대수입 (공실반영)"}),e.jsxs("span",{className:"font-bold text-emerald-600",children:["+",l(Math.round(s.effectiveRent)),"원"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-500",children:"월 총 지출"}),e.jsxs("span",{className:"font-bold text-red-500",children:["-",l(Math.round(s.monthlyExpense)),"원"]})]}),e.jsx("div",{className:"h-px bg-slate-200"}),e.jsxs("div",{className:"flex justify-between font-bold",children:[e.jsx("span",{children:"순현금흐름"}),e.jsxs("span",{className:s.isPositive?"text-emerald-600":"text-red-600",children:[l(Math.round(s.netCashFlow)),"원"]})]})]})]})]}):e.jsx("div",{className:"text-center py-20 text-slate-300 bg-white rounded-[2rem] border-2 border-dashed border-slate-200",children:"월 임대수입을 입력해주세요"})]})};export{B as CashFlowAnalyzer,B as default};
