import{g as x,j as e,o as h}from"./index-C9RPf4rx.js";import{r as m}from"./vendor-icons-BFBm8Ebl.js";import{u}from"./hooks-B9Z0pUV8.js";import"./vendor-react-CRB3T2We.js";import"./storage-DAFidnzi.js";const y=()=>{const[a]=u("portfolio",[]),b=m.useRef(null),o=m.useRef(null),t=m.useMemo(()=>{if(a.length===0)return null;const l=a.reduce((s,c)=>s+(c.price||0),0),r=a.reduce((s,c)=>s+(c.monthlyRent||0),0),n=r*12,d=l>0?n/l*100:0,i={};a.forEach(s=>{i[s.type]=(i[s.type]||0)+(s.price||0)});const p={};return a.forEach(s=>{const c=s.location||"ë¯¸ì§€ì •";p[c]=(p[c]||0)+(s.price||0)}),{totalValue:l,totalMonthlyRent:r,annualIncome:n,avgYield:d.toFixed(2),count:a.length,byType:i,byLocation:p}},[a]);return m.useEffect(()=>{if(!t||!b.current||!window.Chart)return;o.current&&o.current.destroy();const l=Object.keys(t.byType),r=Object.values(t.byType),n=["#6366f1","#8b5cf6","#ec4899","#f59e0b","#10b981","#3b82f6"];return o.current=new window.Chart(b.current,{type:"doughnut",data:{labels:l,datasets:[{data:r,backgroundColor:n.slice(0,l.length),borderWidth:0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{padding:20,usePointStyle:!0,font:{size:11,weight:"bold"}}},tooltip:{callbacks:{label:d=>{const i=(d.raw/t.totalValue*100).toFixed(1);return`${d.label}: ${x(d.raw)} (${i}%)`}}}},cutout:"60%"}}),()=>{o.current&&o.current.destroy()}},[t]),t?e.jsxs("div",{className:"space-y-6 pb-32 animate-slide-up px-1",children:[e.jsxs("div",{className:"bg-gradient-to-br from-indigo-600 via-purple-600 to-pink-500 text-white p-6 rounded-3xl shadow-lg",children:[e.jsx("h3",{className:"text-indigo-200 text-xs font-bold uppercase tracking-wider mb-4",children:"ìì‚° í˜„í™© ëŒ€ì‹œë³´ë“œ"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur rounded-2xl p-4",children:[e.jsx("p",{className:"text-white/70 text-xs font-bold mb-1",children:"ì´ ìì‚°ê°€ì¹˜"}),e.jsx("p",{className:"text-2xl font-black",children:x(t.totalValue)})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur rounded-2xl p-4",children:[e.jsx("p",{className:"text-white/70 text-xs font-bold mb-1",children:"ì›” ì„ëŒ€ìˆ˜ìµ"}),e.jsx("p",{className:"text-2xl font-black",children:x(t.totalMonthlyRent)})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur rounded-2xl p-4",children:[e.jsx("p",{className:"text-white/70 text-xs font-bold mb-1",children:"ì—° ì„ëŒ€ìˆ˜ìµ"}),e.jsx("p",{className:"text-2xl font-black",children:x(t.annualIncome)})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur rounded-2xl p-4",children:[e.jsx("p",{className:"text-white/70 text-xs font-bold mb-1",children:"í‰ê·  ìˆ˜ìµë¥ "}),e.jsxs("p",{className:"text-2xl font-black",children:[t.avgYield,"%"]})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-100",children:[e.jsx("h4",{className:"text-sm font-bold text-slate-600 mb-4",children:"ğŸ“Š ìì‚° êµ¬ì„±"}),e.jsx("div",{className:"h-64",children:e.jsx("canvas",{ref:b})})]}),e.jsxs("div",{className:"bg-white p-5 rounded-2xl shadow-sm border border-slate-100",children:[e.jsx("h4",{className:"text-sm font-bold text-slate-600 mb-4",children:"ğŸ“ ì§€ì—­ë³„ ë¶„í¬"}),e.jsx("div",{className:"space-y-2",children:Object.entries(t.byLocation).map(([l,r],n)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sm text-slate-600 w-24 truncate",children:l}),e.jsx("div",{className:"flex-1 bg-slate-100 rounded-full h-4 overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-indigo-500 to-purple-500 rounded-full",style:{width:`${r/t.totalValue*100}%`}})}),e.jsx("span",{className:"text-sm font-bold text-slate-700 w-20 text-right",children:x(r)})]},n))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-emerald-50 p-4 rounded-2xl text-center",children:[e.jsx("p",{className:"text-xs font-bold text-emerald-600 mb-1",children:"ë³´ìœ  ë§¤ë¬¼"}),e.jsxs("p",{className:"text-2xl font-black text-emerald-700",children:[t.count,"ê±´"]})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-2xl text-center",children:[e.jsx("p",{className:"text-xs font-bold text-purple-600 mb-1",children:"ìœ í˜• ìˆ˜"}),e.jsxs("p",{className:"text-2xl font-black text-purple-700",children:[Object.keys(t.byType).length,"ì¢…"]})]})]})]}):e.jsx("div",{className:"space-y-6 pb-32 animate-slide-up px-1",children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 bg-white rounded-3xl border-2 border-dashed border-slate-200",children:[e.jsx(h,{className:"w-16 h-16 mb-4 text-slate-200"}),e.jsx("p",{className:"text-sm font-bold text-slate-400 mb-2",children:"í¬íŠ¸í´ë¦¬ì˜¤ê°€ ë¹„ì–´ìˆìŠµë‹ˆë‹¤"}),e.jsx("p",{className:"text-xs text-slate-300",children:"'í¬íŠ¸í´ë¦¬ì˜¤' íƒ­ì—ì„œ ë§¤ë¬¼ì„ ì¶”ê°€í•´ì£¼ì„¸ìš”"})]})})};export{y as PortfolioDashboard,y as default};
