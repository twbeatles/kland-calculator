import{r,p as h,s as p,j as e,v as b,i as f}from"./index-B6u5FO8e.js";import{C as g}from"./auto-CieodS8Z.js";import{N as j}from"./Inputs-Blh7JT5J.js";const w=()=>{const[o,m]=r.useState(""),n=r.useRef(null),a=r.useRef(null),t=r.useMemo(()=>{const s=h(o);if(!s)return null;const i=Math.round(s*.01),c=Math.round(s*.004),l=Math.round(s*.002),d=Math.round(s*.001),u=3e3,x=i+c+l+d+u;return{acquisitionTax:i,brokerageFee:c,registrationFee:l,insuranceFee:d,movingCost:u,total:x}},[o]);return r.useEffect(()=>{if(!(!t||!n.current))return a.current&&a.current.destroy(),a.current=new g(n.current,{type:"doughnut",data:{labels:["취득세","중개보수","등록비","보험료","이사비"],datasets:[{data:[t.acquisitionTax,t.brokerageFee,t.registrationFee,t.insuranceFee,t.movingCost],backgroundColor:["#6366f1","#8b5cf6","#ec4899","#f97316","#14b8a6"],borderWidth:0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"}}}}),()=>{a.current&&a.current.destroy()}},[t]),r.useEffect(()=>{if(result){const s=setTimeout(()=>{p("비용구성차트",{timestamp:Date.now()})},3e3);return()=>clearTimeout(s)}},[result]),e.jsxs("div",{className:"space-y-6 pb-32 animate-slide-up px-1",children:[e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-100",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 mb-6 flex items-center",children:[e.jsx(b,{className:"w-5 h-5 mr-3 text-indigo-600"})," 취득 비용 구성"]}),e.jsx(j,{label:"매매가",value:o,onChange:m,color:"indigo"})]}),t&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:e.jsx("div",{className:"h-64",children:e.jsx("canvas",{ref:n})})}),e.jsxs("div",{className:"bg-indigo-50 p-5 rounded-2xl border border-indigo-200 text-center",children:[e.jsx("p",{className:"text-xs font-bold text-indigo-600 mb-1",children:"총 취득비용"}),e.jsx("p",{className:"text-2xl font-black text-indigo-800",children:f(t.total)})]})]})]})};export{w as CostCompositionChart,w as default};
